apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # System
  - ../../system/crossplane/
  - ../../system/vault/
  - ../../system/grafana/
  - ../../system/clickhouse/
  - ../../system/cert-manager/
  # - ../../system/vcluster/
  - ../../system/argocd/
  - ../../system/secret-store-csi/
  - ../../system/opentelemetry-operator/
  - ../../system/gateway-api/
  - ../../system/kubevirt/
  - ../../system/kuma/
  - ../../system/merbridge/
  #- ../../system/pixie/
  # Workload
  - ../samples/kustomize-example-app/
  - ../samples/opentelemetry-demo/
  - ../samples/grav-demo/
  - ../calidum-rotae/
  - ../ganache/
  - ../blockscout/
  - ../acets/
  # ... other apps ...

patches:
  - target:
      kind: Application
    patch: |-
      apiVersion: argoproj.io/v1alpha1
      kind: Application
      metadata:
        name: not-used
        finalizers:
        - resources-finalizer.argocd.argoproj.io
      spec:
        syncPolicy:
          automated:
            selfHeal: true
